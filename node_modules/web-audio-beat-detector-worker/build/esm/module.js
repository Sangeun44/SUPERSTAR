import { analyze } from './helpers/analyze';
import { guess } from './helpers/guess';
addEventListener('message', function (_a) {
    var data = _a.data;
    try {
        if (data.method === 'analyze') {
            var id = data.id, _b = data.params, channelData = _b.channelData, sampleRate = _b.sampleRate;
            var tempo = analyze(channelData, sampleRate);
            postMessage({
                error: null,
                id: id,
                result: { tempo: tempo }
            });
        }
        else if (data.method === 'guess') {
            var id = data.id, _c = data.params, channelData = _c.channelData, sampleRate = _c.sampleRate;
            var _d = guess(channelData, sampleRate), bpm = _d.bpm, offset = _d.offset;
            postMessage({
                error: null,
                id: id,
                result: { bpm: bpm, offset: offset }
            });
        }
        else {
            throw new Error("The given method \"" + data.method + "\" is not supported");
        }
    }
    catch (err) {
        postMessage({
            error: {
                message: err.message
            },
            id: data.id,
            result: null
        });
    }
});
//# sourceMappingURL=/build/es2015/module.js.map